"use strict";angular.module("artpopApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/electric-chapel",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/credit",{templateUrl:"views/credit.html",controller:"CreditCtrl"}).when("/artpop",{templateUrl:"views/artpop.html",controller:"ArtpopCtrl"}).otherwise({redirectTo:"/electric-chapel"})}]),angular.module("artpopApp").run(["$templateCache",function(a){a.put("views/artpop.html","<p>This is the artpop view.</p>"),a.put("views/credit.html",'<div class="panel panel-default ap-credit">\n  <div class="panel-heading">Credit - Software & Library</div>\n  <div class="list-group">\n    <a href="http://threejs.org" class="list-group-item">ThreeJS by Mr.doob!</a>\n    <a href="http://yeoman.io/" class="list-group-item">AngularJS</a>\n    <a href="http://yeoman.io/" class="list-group-item">Karma</a>\n    <a href="http://yeoman.io/" class="list-group-item">Jasmine</a>\n    <a href="http://jquery.com/" class="list-group-item">jQuery</a>\n    <a href="http://getbootstrap.com/" class="list-group-item">Bootstrap</a>\n    <a href="https://github.com/yeoman/generator-angular" class="list-group-item">Angular Generator</a>\n    <a href="http://yeoman.io/" class="list-group-item">Yeoman</a>\n    <a href="http://github.com/" class="list-group-item">Github Desktop Client</a>\n    <a href="http://webgl.org" class="list-group-item">WebGL,OpenGL ESSL - Kronos Group</a>\n    <!--\n		<a href="" class="list-group-item"></a>\n    	<a href="" class="list-group-item"></a>\n    -->\n  </div>\n</div>\n\n<div class="panel panel-default ap-credit">\n  <div class="panel-heading">Example Code Reference *Goodies*</div>\n  <div class="list-group">\n\n    <a href="http://threejs.org/examples/webgl_custom_attributes.html" class="list-group-item">ThreeJS Custom Attribute - Shader Material</a>\n    <a href="http://lab.aerotwist.com/webgl/undulating-monkey/" class="list-group-item">Undulating monkey - Aerotwist</a>\n    <!--\n    <a href="" class="list-group-item"></a>\n  -->\n  <a href="http://jsfiddle.net/p3ZMR/3/" class="list-group-item">AngularJS Active Link Menu</a>\n  <a href="" class="list-group-item"></a>\n  <a href="" class="list-group-item"></a>\n  <a href="" class="list-group-item"></a>\n  <a href="" class="list-group-item"></a>\n\n\n</div>\n</div>\n\n\n<div class="panel panel-default ap-credit">\n  <div class="panel-heading">WebGL Optimisation</div>\n  <div class="list-group">\n\n    <a href="https://developer.mozilla.org/en-US/docs/Web/WebGL/WebGL_best_practices" class="list-group-item">WebGL best pactices - MDN</a>\n    <a href="https://www.youtube.com/watch?v=QVvHtWePQdA" class="list-group-item">Optimizing WebGL Applications with Don Olmstead</a>\n\n  </div>\n</div>\n\n\n<div class="panel panel-default ap-credit">\n  <div class="panel-heading">Devtools Profiling & Web Rendering Optmisation</div>\n  <div class="list-group">\n    <a href="https://www.youtube.com/watch?v=x6qe_kVaBpg" class="list-group-item">Chrome DevTools Gogole I/O 2013 - Paul Irish</a>\n    <a href="https://www.youtube.com/watch?v=9xjpmpX4NJE" class="list-group-item">A rendering perf guide for develoeprs by Paul Lewis</a>\n    <a href="http://jankfree.org/" class="list-group-item">JankFree.org</a>\n    <a href="https://www.youtube.com/watch?v=L3ugr9BJqIs" class="list-group-item">Memory Profiling - McCutchan and Loreena Lee</a>\n    <a href="http://www.html5rocks.com/en/tutorials/memory/effectivemanagement/" class="list-group-item"></a>\n    <a href="" class="list-group-item"></a>\n    <a href="" class="list-group-item"></a>\n    <a href="" class="list-group-item"></a>\n  </div>\n</div>\n\n\n\n\n<div class="panel panel-default ap-credit">\n  <div class="panel-heading">Tutorials</div>\n  <div class="list-group">\n    <a href="http://aerotwist.com/lab/undulating-monkey/" class="list-group-item">Monkey Article - Aerotwist</a>\n    <a href="http://aerotwist.com/tutorials/an-introduction-to-shaders-part-2/" class="list-group-item">Into to Shaders Part 2 - Aerotwist</a>\n    <a href="http://addyosmani.com/resources/essentialjsdesignpatterns/book/" class="list-group-item">Learning JavaScript Design Patterns - Addy Osmani</a>\n    <a href="http://learningthreejs.com/" class="list-group-item">Learning ThreeJS</a>\n    <a href="http://learningwebgl.com/blog/" class="list-group-item">Learning WebGL</a>\n\n\n    <a href="" class="list-group-item"></a>\n    <a href="" class="list-group-item"></a>\n\n  </div>\n</div>\n\n<div class="footer">\n	<p>\n		Made with love <span class="glyphicon glyphicon-heart"></span> from @wonglok831. Fan ART. Copyright belongs to Respective Owner. <br>\n\n	</p>\n</div>'),a.put("views/main.html",'<webgl-detector>\n	Bummer :( Your browser doesn\'t seemd to support ARTPOP WebGL App.<br>\n	You are supposed to see this image.<br>\n	<img ng-src="./images/supposeToSee.png" alt="">\n</webgl-detector>'),a.put("shaders/ap-spiky.fs","/*http://threejs.org/examples/webgl_custom_attributes.html*/\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\nuniform vec3 color;\nuniform sampler2D texture;\n\nvoid main() {\n\n	vec3 light = vec3( 0.5, 0.2, 1.0 );\n	light = normalize( light );\n\n	float dProd = dot( vNormal, light ) * 0.5 + 0.5;\n\n	vec4 tcolor = texture2D( texture, vUv );\n	vec4 gray = vec4( vec3( tcolor.r * 0.3 + tcolor.g * 0.59 + tcolor.b * 0.11 ), 1.0 );\n\n	gl_FragColor = gray * vec4( vec3( dProd ) * vec3( color ), 1.0 );\n\n}"),a.put("shaders/ap-spiky.vs","/*http://threejs.org/examples/webgl_custom_attributes.html*/\n\nuniform float amplitude;\n\nattribute float displacement;\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\nvoid main() {\n\n	vNormal = normal;\n	vUv = ( 0.5 + amplitude ) * uv + vec2( amplitude );\n\n	vec3 newPosition = position\n						+ amplitude\n						* normal\n						* vec3( displacement );\n\n	gl_Position = projectionMatrix\n						* modelViewMatrix\n						* vec4( newPosition, 1.0 );\n\n}")}]),angular.module("artpopApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["ARTPOP","WebGL","Yeoman","Facebook","HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("artpopApp").controller("CreditCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("artpopApp").controller("ArtpopCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("artpopApp").factory("THREE",function(){return THREE}),angular.module("artpopApp").factory("Modernizr",function(){return Modernizr}),angular.module("artpopApp").factory("TWEEN",function(){return TWEEN}),angular.module("artpopApp").directive("webglDetector",["$rootScope","THREE","Modernizr","TWEEN",function(a,b,c,d){function e(){y.resize.invalidate=!0}function f(){}function g(){x=[],t=new b.Scene,u=new b.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),v=new b.WebGLRenderer,v.setSize(window.innerWidth,window.innerHeight),u.aspect=window.innerWidth/window.innerHeight,u.position.z=5}function h(a){s=a.find(".gl-detector-container"),s.html(v.domElement),v.setClearColor(255,0)}function i(){var a=new b.OctahedronGeometry(2,2),c=new b.MeshPhongMaterial({color:16711935,wireframe:!0,wireframeLinewidth:1}),e=new b.Mesh(a,c);t.add(e);var f=new d.Tween(c),g=new d.Tween(c);f.to({wireframeLinewidth:9},500).start(),g.to({wireframeLinewidth:1},500),f.chain(g),g.chain(f);var h=function(){e.rotation.x+=.05,e.rotation.y+=.05,e.rotation.z+=.05,d.update()};x.push(h)}function j(){var a=f("ARTPOP");a&&t.add(a)}function k(){var a=new b.PointLight(16777215,1,100);a.position.set(5,5,5),t.add(a)}function l(){v.render(t,u),m()}function m(){for(var a=x.length-1;a>=0;a--){var b=x[a];"function"==typeof b&&b()}}function n(){y.resize.invalidate&&!y.resize.throttle&&(y.render.throttle=!0,setTimeout(function(){v.setSize(window.innerWidth,window.innerHeight),u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),y.resize.invalidate=!1,y.render.throttle=!1},500))}function o(){w=window.requestAnimationFrame(o),n(),y.render.throttle||l()}function p(){window.cancelAnimationFrame(w)}function q(a){window.addEventListener("resize",e,!1),a.$on("$destroy",function(){p(),window.removeEventListener("resize")})}function r(a,b){a.html(b())}var s,t,u,v,w,x,y={render:{throttle:!1},resize:{invalidate:!1}};return c.webgl&&(g(),k(),i(),j()),{template:'<div class="gl-detector-container"></div>',restrict:"E",transclude:!0,precomplile:function(a){console.log(a.html())},controller:["$scope","$element","$attrs","$transclude",function(a,b,d,e){c.webgl?(h(b,d),q(a),o()):r(b,e)}]}}]),angular.module("artpopApp").directive("activeLink",["$location",function(a){return{restrict:"A",link:function(b,c,d){var e=d.activeLink,f=c.find("a").attr("ng-href");-1!==f.indexOf("#")&&(f=f.substring(1)),b.location=a,b.$watch("location.path()",function(a){0===a.indexOf("/")&&(a=a.substring(1)),f===a?c.addClass(e):c.removeClass(e)})}}}]);